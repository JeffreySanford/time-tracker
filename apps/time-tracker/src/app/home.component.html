<div class="home-container">
  <section class="work-session-container">
    <div class="session-card">
      <!-- Timer & Project Row -->
      <div class="timer-project-row">
        <div class="timer-section">
          <div class="timer-display" [class.active]="timerActive">{{ timerDisplay }}</div>
          <div class="timer-status">
            <span class="status-dot" [class.active]="timerActive"></span>
            {{ timerActive ? 'Recording' : 'Stopped' }}
          </div>
        </div>
        
        <div class="project-selector-compact">
          <button 
            class="selected-project" 
            (click)="toggleProjectSelector()"
            [style.background]="selectedProject.bgColor"
            [style.border-color]="selectedProject.color">
            <span class="project-icon" [style.background]="selectedProject.color">
              {{ selectedProject.name.charAt(0) }}
            </span>
            <div class="project-info">
              <div class="project-name">{{ selectedProject.name.substring(2) }}</div>
              <div class="project-desc">{{ selectedProject.description }}</div>
            </div>
            <span class="dropdown-arrow">‚ñº</span>
          </button>
          
          <div class="project-dropdown" *ngIf="showProjectSelector">
            <button 
              class="project-option" 
              *ngFor="let project of projects; trackBy: trackProject"
              (click)="selectProject(project)"
              [class.selected]="project.id === currentProject"
              [style.border-left-color]="project.color">
              <span class="option-icon" [style.background]="project.color">{{ project.name.charAt(0) }}</span>
              <div class="option-info">
                <span class="option-name">{{ project.name.substring(2) }}</span>
                <span class="option-description">{{ project.description }}</span>
              </div>
            </button>
          </div>
        </div>
      </div>
      
      <!-- Task Input Row -->
      <div class="task-input-row">
        <input 
          type="text" 
          class="task-input-compact" 
          placeholder="What are you working on?"
          [(ngModel)]="currentTaskDescription"
          (keydown.enter)="createTaskFromCurrentSession()">
        <button 
          class="add-task-btn-compact" 
          (click)="createTaskFromCurrentSession()"
          [disabled]="!currentTaskDescription.trim()">
          ‚ûï
        </button>
      </div>
      
      <!-- Timer Controls Row -->
      <div class="timer-controls-compact">
        <button 
          class="control-btn-compact start" 
          (click)="startTimer()"
          [disabled]="timerActive">
          <span class="btn-icon">‚ñ∂</span>
          Start
        </button>
        <button 
          class="control-btn-compact pause" 
          (click)="pauseTimer()"
          [disabled]="!timerActive || isPaused">
          <span class="btn-icon">‚è∏</span>
          Pause
        </button>
        <button 
          class="control-btn-compact stop" 
          (click)="stopTimer()"
          [disabled]="!timerActive">
          <span class="btn-icon">‚èπ</span>
          Stop
        </button>
      </div>
      
      <!-- Quick Tags -->
      <div class="quick-tags" *ngIf="selectedProject.suggestedTags.length > 0">
        <button 
          *ngFor="let tag of selectedProject.suggestedTags" 
          class="quick-tag"
          [style.background]="tag.color"
          (click)="addTag(tag)">
          {{ tag.name }}
        </button>
      </div>
      
      <!-- Current Tags -->
      <div class="current-tags" *ngIf="currentTags.length > 0">
        <div class="tag-chips">
          <button 
            *ngFor="let tag of currentTags"
            class="tag-chip"
            [style.background-color]="getTagColor(tag)"
            (click)="removeTag(tag)"
            type="button"
            [attr.aria-label]="'Remove tag ' + tag">
            {{ tag }}
            <span class="remove-icon">√ó</span>
          </button>
        </div>
      </div>
      
      <!-- Tasks Table -->
      <div class="tasks-table-section">
        <!-- Project Header -->
        <div class="project-tasks-header">
          <div class="project-title-section">
            <span class="project-icon-large" [style.background]="selectedProject.color">
              {{ selectedProject.name.charAt(0) }}
            </span>
            <div class="project-title-info">
              <h2 class="project-title">
                Project 
                <span class="project-name" [style.color]="selectedProject.color">
                  ({{ selectedProject.name.substring(2) }})
                </span>
                Tasks
              </h2>
              <p class="project-description">{{ selectedProject.description }}</p>
            </div>
          </div>
          <div class="task-count-badge" [style.background]="selectedProject.bgColor" [style.border-color]="selectedProject.color">
            {{ tasks.length }} task{{ tasks.length !== 1 ? 's' : '' }}
          </div>
        </div>
        
        <div class="table-container">
          <table class="tasks-table" *ngIf="tasks.length > 0">
            <thead>
              <tr>
                <th>Task</th>
                <th>Tags</th>
                <th>Time</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let task of tasks">
                <td>
                  <div class="task-title">{{ task.title }}</div>
                  <div class="task-description" *ngIf="task.description">{{ task.description }}</div>
                </td>
                <td>
                  <div class="task-tags">
                    <span 
                      *ngFor="let tag of task.tags"
                      class="task-tag"
                      [style.background-color]="getTagColor(tag)">
                      {{ tag }}
                    </span>
                  </div>
                </td>
                <td>
                  <span class="time-spent">{{ formatTime(task.timeSpent) }}</span>
                </td>
                <td>
                  <button 
                    class="status-badge"
                    [class]="'status-' + task.status"
                    (click)="toggleTaskStatus(task)"
                    type="button"
                    [attr.aria-label]="'Change status from ' + task.status">
                    {{ task.status }}
                  </button>
                </td>
                <td>
                  <button 
                    class="delete-btn" 
                    (click)="deleteTask(task.id)" 
                    title="Delete task">
                    üóëÔ∏è
                  </button>
                </td>
              </tr>
            </tbody>
          </table>

          <!-- Empty State -->
          <div class="empty-state" *ngIf="tasks.length === 0">
            <div class="empty-icon">üìã</div>
            <h3>No tasks yet</h3>
            <p>Start by creating a task above or begin timing your work</p>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <button class="manual-entry-btn">Quick Add Manual Entry</button>
</div>
